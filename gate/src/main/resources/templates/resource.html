<!doctype html>
<html class="no-js" lang="en"
      xmlns:th="http://thymeleaf.org"
      xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>鱼水狩·Blog</title>
    <meta name="description" content="博客">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.ico">
    <!-- CSS here -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/assets/css/slicknav.css">
    <link rel="stylesheet" href="/assets/css/flaticon.css">
    <link rel="stylesheet" href="/assets/css/animate.min.css">
    <link rel="stylesheet" href="/assets/css/magnific-popup.css">
    <link rel="stylesheet" href="/assets/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/assets/css/themify-icons.css">
    <link rel="stylesheet" href="/assets/css/slick.css">
    <link rel="stylesheet" href="/assets/css/nice-select.css">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/tao/mine.css">
    <script src="/tao/config.js"></script>
</head>
<body>
<!-- Preloader Start -->
<div id="preloader-active">
    <div class="preloader d-flex align-items-center justify-content-center">
        <div class="preloader-inner position-relative">
            <div class="preloader-circle"></div>
            <div class="preloader-img pere-text">
                <img src="/assets/img/logo/logo.png" alt="QAQ">
            </div>
        </div>
    </div>
</div>
<!-- Preloader Start -->
<header>
    <!-- Header Start -->
    <div class="header-area">
        <div class="main-header  header-sticky">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <!-- Logo -->
                    <div class="col-xl-2 col-lg-2 col-md-1">
                        <div class="logo row">
                            <a href="/index"><img src="/assets/img/logo/logo.png" alt="QAQ"></a>
                        </div>
                    </div>
                    <div class="col-xl-10 col-lg-10 col-md-10">
                        <div class="menu-main d-flex align-items-center justify-content-end">
                            <!-- Main-menu -->
                            <div class="main-menu f-right d-none d-lg-block">
                                <nav>
                                    <ul id="navigation">
                                        <li><a href="/index">首页</a></li>
                                        <li><a href="/resource">资源</a></li>
                                        <li><a href="/followed">关注</a></li>
                                        <li><a href="/news">消息</a></li>
                                        <li><a href="/my">我的</a></li>
                                        <li><a href="/editor">发布帖子</a></li>
                                    </ul>
                                </nav>
                            </div>
                            <div id="isAuth" style="display: inline">
                                <div class="header-right-btn f-right d-none d-xl-block ml-20" >
                                    <a href="/login" class="btn header-btn">登录</a>
                                    <a href="/register" class="btn header-btn">注册</a>
                                </div>
                            </div>
                            <script>
                                let token = window.sessionStorage.getItem("token");
                                if (token != null) {
                                    document.getElementById('isAuth').style.display = 'none';
                                    let strings = token.split("."); //截取token，获取载体
                                    let tokenInfo = JSON.parse(decodeURIComponent(escape(window.atob(strings[1].replace(/-/g, "+").replace(/_/g, "/"))))); //解析，需要吧‘_’,'-'进行转换否则会无法解析

                                    let temLi01 = document.createElement("li");
                                    let temImg = document.createElement("img");
                                    temImg.src = FILE_SERVER_URL + tokenInfo.userInfo.avatarUrl;
                                    temImg.className = "taoAvatar"
                                    temLi01.appendChild(temImg)
                                    document.getElementById("navigation").appendChild(temLi01);

                                    let temLi02 = document.createElement("li");
                                    temLi02.innerText = tokenInfo.userInfo.username;
                                    document.getElementById("navigation").appendChild(temLi02);
                                }
                            </script>
                        </div>
                    </div>
                    <span style="font-size: xx-small;color: darkgrey" th:text="'访问量:'+${visitors}"></span>
                    <!-- Mobile Menu -->
                    <div class="col-12">
                        <div class="mobile_menu d-block d-lg-none"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Header End -->
</header>
<main>
    <!-- Start Align Area -->
    <div class="whole-wrap">
        <div class="container">
            <div class="section-top-border">
                <div style="font-size: xx-large">大海</div>
                <div class="row">
                    <div class="col-lg-12">
                        <blockquote class="generic-blockquote">
                            希望海中有很多你喜欢的鱼儿，注意安全，出发了！
                        </blockquote>
                    </div>
                </div>
            </div>
            <div class="section-top-border">
                <div class="row">
                    <div style="font-size: xx-large">公开资源</div>
                    <form action="/me/uploadShare" enctype="multipart/form-data" method="post" style="margin-top: 1%;margin-left: 32%">
                        <input type="file" name="shareFile">
                        <button class="btn btn-primary" style="padding: 15px 15px;">提交公开资源</button>
                    </form>
                </div>
                <div class="progress-table-wrap">
                    <div class="progress-table">
                        <div class="table-head">
                            <div class="serial">#</div>
                            <div class="country">文件名</div>
                            <div class="country">文件描述</div>
                            <div class="visit">下载量</div>
                            <div class="percentage">上传者</div>
                            <div class="visit">Fish</div>
                        </div>
                        <div class="table-row" th:each="item:${shareUpload}">
                            <div class="serial" th:text="${itemStat.index}+1"></div>
                            <div class="country" th:text="${item.filename}"></div>
                            <div class="country">无</div>
                            <div class="visit" th:text="${item.downloadnum}"></div>
                            <div class="percentage">鱼水id:<span th:text="${item.uploaderid}"></span></div>
                            <div class="visit">
                                <a class="btn btn-primary" style="padding: 15px 15px; color: white" th:href="'/downloadShare/'+${item.localname}"  >下载</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="section-top-border" shiro:authenticated="">
                <div class="row">
                    <div style="font-size: xx-large">私人资源</div>
                    <form action="/me/uploadPrivate" enctype="multipart/form-data" method="post" style="margin-top: 1%;margin-left: 32%">
                        <input type="file" name="privateFile">
                        <button class="btn btn-primary" style="padding: 15px 15px;">提交私人资源</button>
                    </form>
                </div>
                <div class="progress-table-wrap">
                    <div class="progress-table">
                        <div class="table-head">
                            <div class="serial">#</div>
                            <div class="country">文件名</div>
                            <div class="country">文件描述</div>
                            <div class="visit">下载量</div>
                            <div class="percentage">上传者</div>
                            <div class="visit">Fish</div>
                        </div>
                        <div class="table-row" th:each="item:${privateUpload}">
                            <div class="serial" th:text="${itemStat.index}+1"></div>
                            <div class="country" th:text="${item.filename}"></div>
                            <div class="country">无</div>
                            <div class="visit" th:text="${item.downloadnum}"></div>
                            <div class="percentage">鱼水id:<span th:text="${item.uploaderid}"></span></div>
                            <div class="visit">
                                <a class="btn btn-primary" style="padding: 15px 15px; color: white" th:href="'me/downloadPrivate/'+${item.localname}"  >下载</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </div>
    </div>
    <!-- End Align Area -->
</main>
<footer>
    <!-- Footer Start-->
    <div class="footer-area">
        <div class="container">
            <div class="footer-top footer-padding">
                <div class="row justify-content-center">
                    <div class="col-lg-6">
                        <div class="footer-top-cap text-center">
                            <img src="/assets/img/logo/logo.png" alt="QAQ">
                            <span><a href="#">245149633@qq.com</a></span>
                            <p>以上是作者邮箱,有意见可联系作者</p>
                            <p>2021-5-1</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="row d-flex justify-content-between align-items-center">
                    <div class="col-xl-9 col-lg-8">
                        <div class="footer-copy-right">
                            <p>
                                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This webSite is made with <i class="fa fa-heart" aria-hidden="true"></i> by <a href="http://wytcloud.top" target="_blank">鱼水狩</a>
                                <a href="https://beian.miit.gov.cn/" target="_blank">粤ICP备2021062754号</a>
                            </p>
                            <p>
                                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | Thanks for view template provider,<a href="https://colorlib.com" target="_blank">Colorlib</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End-->
</footer>
<!-- Scroll Up -->
<div id="back-top" >
    <a title="Go to Top" href="#"> <i class="fas fa-level-up-alt"></i></a>
</div>

<!-- JS here -->
<!-- All JS Custom Plugins Link Here here -->
<script src="/assets/js/vendor/modernizr-3.5.0.min.js"></script>
<!-- Jquery, Popper, Bootstrap -->
<script src="/assets/js/vendor/jquery-1.12.4.min.js"></script>
<script src="/assets/js/popper.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<!-- Jquery Mobile Menu -->
<script src="/assets/js/jquery.slicknav.min.js"></script>

<!-- Jquery Slick , Owl-Carousel Plugins -->
<script src="/assets/js/owl.carousel.min.js"></script>
<script src="/assets/js/slick.min.js"></script>
<!-- One Page, Animated-HeadLin -->
<script src="/assets/js/wow.min.js"></script>
<script src="/assets/js/animated.headline.js"></script>
<script src="/assets/js/jquery.magnific-popup.js"></script>

<!-- Nice-select, sticky -->
<script src="/assets/js/jquery.nice-select.min.js"></script>
<script src="/assets/js/jquery.sticky.js"></script>

<!-- contact js -->
<script src="/assets/js/contact.js"></script>
<script src="/assets/js/jquery.form.js"></script>
<script src="/assets/js/jquery.validate.min.js"></script>
<script src="/assets/js/mail-script.js"></script>
<script src="/assets/js/jquery.ajaxchimp.min.js"></script>

<!-- Jquery Plugins, main Jquery -->
<script src="/assets/js/plugins.js"></script>
<script src="/assets/js/main.js"></script>

</body>
</html>